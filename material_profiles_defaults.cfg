# =========================================================================
#  ADAPTIVE FLOW - MATERIAL PROFILES (SYSTEM DEFAULTS)
# =========================================================================
#  This file contains system default material profiles and is updated by git.
#  DO NOT EDIT THIS FILE - your changes will be overwritten on update.
#
#  To add custom materials, create material_profiles_user.cfg instead.
#  See material_profiles_user.cfg.example for a template.
#
#  These profiles are optimized for E3D Revo hotends.
#  Each material has its own boost curve tuned for its properties.
#
#  PARAMETER GUIDE:
#  ----------------
#  flow_k:         Temp boost per mm³/s of flow (higher = more aggressive)
#  speed_boost_k:  Temp boost per mm/s above 100mm/s (for thin walls at speed)
#  max_boost:      Maximum temperature boost cap (°C above base)
#  max_temp:       Absolute maximum temperature limit (safety)
#  flow_gate:      Minimum flow (mm³/s) before boost activates
#  pa_boost_k:     PA reduction per °C of boost (viscosity compensation)
#  ramp_rise:      How fast temp can increase (°C/s)
#  ramp_fall:      How fast temp can decrease (°C/s)
#  default_pa:     Default PA if user hasn't calibrated
# =========================================================================

# =========================================================================
#  PLA - Tuned for high-flow PLA variants (PLA+, PLA HF, etc.)
# =========================================================================
#  More aggressive than standard PLA to handle high volumetric rates.
#  At 18mm³/s with 215°C base: 215 + (18 × 1.0) = 233°C
#  
#  RECOMMENDED BASE TEMPS:
#    - Low flow (<10mm³/s): 205-210°C
#    - Medium flow (10-15mm³/s): 215-220°C  
#    - High flow (15-20mm³/s): 220-225°C
#
#  NOTE: Smart Cooling with heater-adaptive feedback enabled for PLA.
#  Fan will automatically reduce when heater struggles (>90% duty cycle),
#  preventing CPAP fans from overwhelming the heater at high temps.
# =========================================================================
[gcode_macro _AF_PROFILE_PLA]
variable_flow_k: 0.80
variable_speed_boost_k: 0.08
variable_max_boost: 30.0
variable_max_temp: 245
variable_flow_gate: 12.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 3.5
variable_ramp_fall: 2.0
variable_default_pa: 0.035
# Smart Cooling: Enabled with heater-adaptive feedback
# PLA likes high cooling, but will auto-reduce if heater struggles
variable_sc_base_fan: 0.70
variable_sc_flow_gate: 8.0
variable_sc_flow_k: 0.02
variable_sc_min_fan: 0.20
variable_sc_max_fan: 1.00
gcode:

# =========================================================================
#  PETG - Aggressive boost for high-flow printing
# =========================================================================
#  Tuned to match Bambu Lab high-flow profiles (~260°C at 18mm³/s).
#  At 18mm³/s with 240°C base: 240 + (18 × 1.10) = 260°C
#
#  RECOMMENDED BASE TEMP: 240°C
# =========================================================================
[gcode_macro _AF_PROFILE_PETG]
variable_flow_k: 1.10
variable_speed_boost_k: 0.10
variable_max_boost: 40.0
variable_max_temp: 280
variable_flow_gate: 10.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.0012
variable_ramp_rise: 5.0
variable_ramp_fall: 2.0
variable_default_pa: 0.060
# Smart Cooling: PETG uses low fan - max 40% to maintain layer adhesion
variable_sc_base_fan: 0.25
variable_sc_flow_gate: 10.0
variable_sc_flow_k: 0.02
variable_sc_min_fan: 0.15
variable_sc_max_fan: 0.40
gcode:

# =========================================================================
#  ABS - Tolerates high temps, fast response OK
# =========================================================================
#  At 15mm³/s with 245°C base: 245 + (15 × 0.80) = 257°C
#
#  RECOMMENDED BASE TEMPS:
#    - Low flow (<10mm³/s): 235-240°C
#    - Medium flow (10-15mm³/s): 245-250°C
#    - High flow (15-20mm³/s): 250-255°C
# =========================================================================
[gcode_macro _AF_PROFILE_ABS]
variable_flow_k: 0.80
variable_speed_boost_k: 0.10
variable_max_boost: 50.0
variable_max_temp: 290
variable_flow_gate: 12.0
variable_flow_gate_std: 9.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 5.0
variable_ramp_fall: 3.0
variable_default_pa: 0.050
# Smart Cooling: ABS needs minimal cooling to prevent warping
variable_sc_base_fan: 0.20
variable_sc_flow_gate: 15.0
variable_sc_flow_k: 0.01
variable_sc_min_fan: 0.00
variable_sc_max_fan: 0.40
gcode:

# =========================================================================
#  ASA - Similar to ABS, slightly more temp tolerant
# =========================================================================
#  At 15mm³/s with 250°C base: 250 + (15 × 0.80) = 262°C
#
#  RECOMMENDED BASE TEMPS:
#    - Low flow (<10mm³/s): 240-245°C
#    - Medium flow (10-15mm³/s): 250-255°C
#    - High flow (15-20mm³/s): 255-260°C
# =========================================================================
[gcode_macro _AF_PROFILE_ASA]
variable_flow_k: 0.80
variable_speed_boost_k: 0.10
variable_max_boost: 50.0
variable_max_temp: 295
variable_flow_gate: 12.0
variable_flow_gate_std: 9.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 5.0
variable_ramp_fall: 3.0
variable_default_pa: 0.050
# Smart Cooling: ASA needs minimal cooling like ABS
variable_sc_flow_gate: 15.0
variable_sc_flow_k: 0.01
variable_sc_min_fan: 0.00
variable_sc_max_fan: 0.40
variable_sc_base_fan: 0.20
gcode:

# =========================================================================
#  TPU - Minimal boost, very slow ramps (heat sensitive)
# =========================================================================
#  At 8mm³/s with 220°C base: 220 + (8 × 0.20) = 221.6°C
#
#  RECOMMENDED BASE TEMPS:
#    - Low flow (<5mm³/s): 215-220°C
#    - Medium flow (5-10mm³/s): 220-225°C
#    - High flow (10-15mm³/s): 225-230°C
# =========================================================================
[gcode_macro _AF_PROFILE_TPU]
variable_flow_k: 0.20
variable_speed_boost_k: 0.02
variable_max_boost: 15.0
variable_max_temp: 240
variable_flow_gate: 5.0
variable_flow_gate_std: 4.0
variable_pa_boost_k: 0.0005
variable_ramp_rise: 1.5
variable_ramp_fall: 0.5
variable_default_pa: 0.200
# Smart Cooling: TPU needs minimal cooling for layer adhesion
variable_sc_flow_gate: 5.0
variable_sc_flow_k: 0.01
variable_sc_min_fan: 0.10
variable_sc_max_fan: 0.50
variable_sc_base_fan: 0.30
gcode:

# =========================================================================
#  NYLON / PA - Hygroscopic, steady temps, moderate boost
# =========================================================================
#  At 15mm³/s with 250°C base: 250 + (15 × 0.90) = 263.5°C
#
#  RECOMMENDED BASE TEMPS:
#    - Low flow (<10mm³/s): 240-245°C
#    - Medium flow (10-15mm³/s): 250-255°C
#    - High flow (15-20mm³/s): 255-260°C
# =========================================================================
[gcode_macro _AF_PROFILE_NYLON]
variable_flow_k: 0.90
variable_speed_boost_k: 0.07
variable_max_boost: 35.0
variable_max_temp: 275
variable_flow_gate: 12.0
variable_flow_gate_std: 9.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 3.0
variable_ramp_fall: 1.5
variable_default_pa: 0.055
# Smart Cooling: Nylon needs low cooling, warps easily
variable_sc_flow_gate: 10.0
variable_sc_flow_k: 0.02
variable_sc_min_fan: 0.10
variable_sc_max_fan: 0.50
variable_sc_base_fan: 0.25
gcode:

# =========================================================================
#  PC (Polycarbonate) - High temps, aggressive boost OK
# =========================================================================
#  At 15mm³/s with 275°C base: 275 + (15 × 0.70) = 285.5°C
#
#  RECOMMENDED BASE TEMPS:
#    - Low flow (<10mm³/s): 265-270°C
#    - Medium flow (10-15mm³/s): 275-280°C
#    - High flow (15-20mm³/s): 280-285°C
# =========================================================================
[gcode_macro _AF_PROFILE_PC]
variable_flow_k: 0.70
variable_speed_boost_k: 0.10
variable_max_boost: 50.0
variable_max_temp: 310
variable_flow_gate: 11.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 5.0
variable_ramp_fall: 2.5
variable_default_pa: 0.045
# Smart Cooling: PC needs very low cooling, high temps
variable_sc_flow_gate: 15.0
variable_sc_flow_k: 0.01
variable_sc_min_fan: 0.00
variable_sc_max_fan: 0.30
variable_sc_base_fan: 0.15
gcode:

# =========================================================================
#  HIPS - Similar to ABS, support material
# =========================================================================
#  At 15mm³/s with 230°C base: 230 + (15 × 0.75) = 241.25°C
#
#  RECOMMENDED BASE TEMPS:
#    - Low flow (<10mm³/s): 220-225°C
#    - Medium flow (10-15mm³/s): 230-235°C
#    - High flow (15-20mm³/s): 235-240°C
# =========================================================================
[gcode_macro _AF_PROFILE_HIPS]
variable_flow_k: 0.75
variable_speed_boost_k: 0.08
variable_max_boost: 45.0
variable_max_temp: 250
variable_flow_gate: 10.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 4.0
variable_ramp_fall: 2.0
variable_default_pa: 0.045
# Smart Cooling: HIPS needs minimal cooling like ABS
variable_sc_flow_gate: 12.0
variable_sc_flow_k: 0.02
variable_sc_min_fan: 0.00
variable_sc_max_fan: 0.40
variable_sc_base_fan: 0.20
gcode:

# =========================================================================
#  DEFAULT - Fallback for unknown materials (conservative PLA-like)
# =========================================================================
[gcode_macro _AF_PROFILE_DEFAULT]
variable_flow_k: 0.50
variable_speed_boost_k: 0.06
variable_max_boost: 30.0
variable_max_temp: 280
variable_flow_gate: 10.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 3.0
variable_ramp_fall: 1.5
variable_default_pa: 0.040
# Smart Cooling: Conservative PLA-like settings
variable_sc_flow_gate: 8.0
variable_sc_flow_k: 0.02
variable_sc_min_fan: 0.20
variable_sc_max_fan: 0.80
variable_sc_base_fan: 0.50
gcode:
