# =========================================================================
#  ADAPTIVE FLOW - MATERIAL PROFILES
# =========================================================================
#  Edit these profiles to tune adaptive temperature for your filaments.
#  Each material has its own boost curve optimized for its properties.
#
#  To add a custom material:
#    1. Copy any profile below
#    2. Rename to [gcode_macro _AF_PROFILE_YOURMATERIAL]
#    3. Adjust the values
#    4. Pass MATERIAL=YOURMATERIAL from your slicer
#
#  PARAMETER GUIDE:
#  ----------------
#  flow_k:         Temp boost per mm³/s of flow (higher = more aggressive)
#  speed_boost_k:  Temp boost per mm/s above 100mm/s (for thin walls at speed)
#  max_boost:      Maximum temperature boost cap (°C above base)
#  max_temp:       Absolute maximum temperature limit (safety)
#  flow_gate:      Minimum flow (mm³/s) before boost activates
#  pa_boost_k:     PA reduction per °C of boost (viscosity compensation)
#  ramp_rise:      How fast temp can increase (°C/s)
#  ramp_fall:      How fast temp can decrease (°C/s)
#  default_pa:     Default PA if user hasn't calibrated
# =========================================================================

# =========================================================================
#  PLA - Fast response, capped boost (degrades above ~235°C)
# =========================================================================
[gcode_macro _AF_PROFILE_PLA]
variable_flow_k: 0.80
variable_speed_boost_k: 0.06
variable_max_boost: 25.0
variable_max_temp: 235
variable_flow_gate: 10.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 4.0
variable_ramp_fall: 2.0
variable_default_pa: 0.040
gcode:

# =========================================================================
#  PETG - Aggressive boost, slow cooldown (prevents stringing)
# =========================================================================
[gcode_macro _AF_PROFILE_PETG]
variable_flow_k: 1.20
variable_speed_boost_k: 0.08
variable_max_boost: 40.0
variable_max_temp: 280
variable_flow_gate: 14.0
variable_flow_gate_std: 10.0
variable_pa_boost_k: 0.0012
variable_ramp_rise: 4.0
variable_ramp_fall: 1.5
variable_default_pa: 0.060
gcode:

# =========================================================================
#  ABS - Tolerates high temps, fast response OK
# =========================================================================
[gcode_macro _AF_PROFILE_ABS]
variable_flow_k: 0.80
variable_speed_boost_k: 0.10
variable_max_boost: 50.0
variable_max_temp: 290
variable_flow_gate: 12.0
variable_flow_gate_std: 9.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 5.0
variable_ramp_fall: 3.0
variable_default_pa: 0.050
gcode:

# =========================================================================
#  ASA - Similar to ABS, slightly more temp tolerant
# =========================================================================
[gcode_macro _AF_PROFILE_ASA]
variable_flow_k: 0.80
variable_speed_boost_k: 0.10
variable_max_boost: 50.0
variable_max_temp: 295
variable_flow_gate: 12.0
variable_flow_gate_std: 9.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 5.0
variable_ramp_fall: 3.0
variable_default_pa: 0.050
gcode:

# =========================================================================
#  TPU - Minimal boost, very slow ramps (heat sensitive)
# =========================================================================
[gcode_macro _AF_PROFILE_TPU]
variable_flow_k: 0.20
variable_speed_boost_k: 0.02
variable_max_boost: 15.0
variable_max_temp: 240
variable_flow_gate: 5.0
variable_flow_gate_std: 4.0
variable_pa_boost_k: 0.0005
variable_ramp_rise: 1.5
variable_ramp_fall: 0.5
variable_default_pa: 0.200
gcode:

# =========================================================================
#  NYLON / PA - Hygroscopic, steady temps, moderate boost
# =========================================================================
[gcode_macro _AF_PROFILE_NYLON]
variable_flow_k: 0.90
variable_speed_boost_k: 0.07
variable_max_boost: 35.0
variable_max_temp: 275
variable_flow_gate: 12.0
variable_flow_gate_std: 9.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 3.0
variable_ramp_fall: 1.5
variable_default_pa: 0.055
gcode:

# =========================================================================
#  PC (Polycarbonate) - High temps, aggressive boost OK
# =========================================================================
[gcode_macro _AF_PROFILE_PC]
variable_flow_k: 0.70
variable_speed_boost_k: 0.10
variable_max_boost: 50.0
variable_max_temp: 310
variable_flow_gate: 11.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 5.0
variable_ramp_fall: 2.5
variable_default_pa: 0.045
gcode:

# =========================================================================
#  HIPS - Similar to ABS, support material
# =========================================================================
[gcode_macro _AF_PROFILE_HIPS]
variable_flow_k: 0.75
variable_speed_boost_k: 0.08
variable_max_boost: 45.0
variable_max_temp: 250
variable_flow_gate: 10.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 4.0
variable_ramp_fall: 2.0
variable_default_pa: 0.045
gcode:

# =========================================================================
#  DEFAULT - Fallback for unknown materials (conservative PLA-like)
# =========================================================================
[gcode_macro _AF_PROFILE_DEFAULT]
variable_flow_k: 0.50
variable_speed_boost_k: 0.06
variable_max_boost: 30.0
variable_max_temp: 280
variable_flow_gate: 10.0
variable_flow_gate_std: 8.0
variable_pa_boost_k: 0.001
variable_ramp_rise: 3.0
variable_ramp_fall: 1.5
variable_default_pa: 0.040
gcode:
